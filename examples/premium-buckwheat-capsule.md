# 精选荞愈胶囊生产线示例

## 生产目标

一个`灌装机`满速生产`精选荞愈胶囊`

## 需求分析

### 直接输入（灌装机）
- 输入：2满带`钢制瓶` + 2满带`细磨荞花粉末`
- 输出：1满带`精选荞愈胶囊`

## 生产链路图

```mermaid
graph LR
    %% 最终产品
    灌装机[灌装机 x1] --> 精选荞愈胶囊[精选荞愈胶囊<br/>1满带]
    
    %% 钢制瓶生产线
    塑形机1[塑形机 x1] -->|1满带| 钢制瓶合并{合并}
    塑形机2[塑形机 x1] -->|1满带| 钢制瓶合并
    钢制瓶合并 -->|2满带| 灌装机
    
    %% 钢块生产线（为钢制瓶）
    精炼炉-钢1[精炼炉 x1] -->|1满带| 钢块合并1{合并}
    精炼炉-钢2[精炼炉 x1] -->|1满带| 钢块合并1
    钢块合并1 -->|2满带| 塑形机1
    
    精炼炉-钢3[精炼炉 x1] -->|1满带| 钢块合并2{合并}
    精炼炉-钢4[精炼炉 x1] -->|1满带| 钢块合并2
    钢块合并2 -->|2满带| 塑形机2
    
    %% 致密蓝铁粉末生产线（为钢块）
    研磨机-致密1[研磨机 x1] -->|1满带| 精炼炉-钢1
    研磨机-致密2[研磨机 x1] -->|1满带| 精炼炉-钢2
    研磨机-致密3[研磨机 x1] -->|1满带| 精炼炉-钢3
    研磨机-致密4[研磨机 x1] -->|1满带| 精炼炉-钢4
    
    %% 蓝铁粉末生产线
    粉碎机1[粉碎机 x1] -->|1满带| 蓝铁粉末合并1{合并}
    粉碎机2[粉碎机 x1] -->|1满带| 蓝铁粉末合并1
    蓝铁粉末合并1 -->|2满带| 研磨机-致密1
    
    粉碎机3[粉碎机 x1] -->|1满带| 蓝铁粉末合并2{合并}
    粉碎机4[粉碎机 x1] -->|1满带| 蓝铁粉末合并2
    蓝铁粉末合并2 -->|2满带| 研磨机-致密2
    
    粉碎机5[粉碎机 x1] -->|1满带| 蓝铁粉末合并3{合并}
    粉碎机6[粉碎机 x1] -->|1满带| 蓝铁粉末合并3
    蓝铁粉末合并3 -->|2满带| 研磨机-致密3
    
    粉碎机7[粉碎机 x1] -->|1满带| 蓝铁粉末合并4{合并}
    粉碎机8[粉碎机 x1] -->|1满带| 蓝铁粉末合并4
    蓝铁粉末合并4 -->|2满带| 研磨机-致密4
    
    %% 蓝铁块生产线
    精炼炉-蓝铁1[精炼炉 x1] -->|1满带| 粉碎机1
    精炼炉-蓝铁2[精炼炉 x1] -->|1满带| 粉碎机2
    精炼炉-蓝铁3[精炼炉 x1] -->|1满带| 粉碎机3
    精炼炉-蓝铁4[精炼炉 x1] -->|1满带| 粉碎机4
    精炼炉-蓝铁5[精炼炉 x1] -->|1满带| 粉碎机5
    精炼炉-蓝铁6[精炼炉 x1] -->|1满带| 粉碎机6
    精炼炉-蓝铁7[精炼炉 x1] -->|1满带| 粉碎机7
    精炼炉-蓝铁8[精炼炉 x1] -->|1满带| 粉碎机8
    
    %% 砂叶粉末输入（为致密蓝铁粉末）
    砂叶粉末输入1[砂叶粉末<br/>1满带] --> 研磨机-致密1
    砂叶粉末输入2[砂叶粉末<br/>1满带] --> 研磨机-致密2
    砂叶粉末输入3[砂叶粉末<br/>1满带] --> 研磨机-致密3
    砂叶粉末输入4[砂叶粉末<br/>1满带] --> 研磨机-致密4
    
    %% 蓝铁矿原料输入
    蓝铁矿1[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁1
    蓝铁矿2[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁2
    蓝铁矿3[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁3
    蓝铁矿4[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁4
    蓝铁矿5[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁5
    蓝铁矿6[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁6
    蓝铁矿7[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁7
    蓝铁矿8[蓝铁矿<br/>1满带] --> 精炼炉-蓝铁8
    
    %% 细磨荞花粉末生产线
    研磨机-荞花1[研磨机 x1] -->|1满带| 细磨荞花合并{合并}
    研磨机-荞花2[研磨机 x1] -->|1满带| 细磨荞花合并
    细磨荞花合并 -->|2满带| 灌装机
    
    %% 荞花粉末输入
    荞花粉末1[荞花粉末<br/>2满带] --> 研磨机-荞花1
    荞花粉末2[荞花粉末<br/>2满带] --> 研磨机-荞花2
    
    %% 砂叶粉末输入（为细磨荞花粉末）
    砂叶粉末输入5[砂叶粉末<br/>1满带] --> 研磨机-荞花1
    砂叶粉末输入6[砂叶粉末<br/>1满带] --> 研磨机-荞花2
    
    %% 样式
    classDef rawMaterial fill:#90EE90
    classDef machine fill:#87CEEB
    classDef product fill:#FFD700
    
    class 蓝铁矿1,蓝铁矿2,蓝铁矿3,蓝铁矿4,蓝铁矿5,蓝铁矿6,蓝铁矿7,蓝铁矿8 rawMaterial
    class 荞花粉末1,荞花粉末2 rawMaterial
    class 砂叶粉末输入1,砂叶粉末输入2,砂叶粉末输入3,砂叶粉末输入4,砂叶粉末输入5,砂叶粉末输入6 rawMaterial
    class 精选荞愈胶囊 product
```

## 建筑清单

| 建筑类型 | 数量 | 用途 |
|---------|------|------|
| 灌装机 | 1 | 生产精选荞愈胶囊 |
| 研磨机 | 6 | 2个生产细磨荞花粉末<br/>4个生产致密蓝铁粉末 |
| 塑形机 | 2 | 生产钢制瓶 |
| 精炼炉 | 12 | 4个生产钢块<br/>8个生产蓝铁块 |
| 粉碎机 | 8 | 生产蓝铁粉末 |
| **总计** | **29** | |

## 原料需求

| 原料名称 | 需求量 |
|---------|--------|
| 蓝铁矿 | 8满带 |
| 荞花粉末 | 4满带 |
| 砂叶粉末 | 6满带 |

## 中间产物流量

| 产物名称 | 流量 |
|---------|------|
| 蓝铁块 | 8满带 |
| 蓝铁粉末 | 8满带 |
| 致密蓝铁粉末 | 4满带 |
| 钢块 | 4满带 |
| 钢制瓶 | 2满带 |
| 细磨荞花粉末 | 2满带 |

## 优化目标

在给定上述29个建筑的情况下，寻找最紧凑的布局方案，使得：
1. 所有建筑都能被电力塔覆盖
2. 占用的地图面积最小
3. 电力塔数量尽可能少
